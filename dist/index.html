<body style="display:flex;align-items:center;justify-content:center;background:#181622;touch-action:none"><canvas id=c style="image-rendering:pixelated"></canvas><script>const t=[0,0,10,16],e={"mMWTVw/$%":6,'I1f-=*+?{}"':4,"lj[]()|'`,":3,"i:.!":2},s=Math.PI,o=s/2,i=2*s;function n(t,e){return{x:t,y:e}}function r(t,e,s){return t<e?e:t>s?s:t}function a(t){return[Math.cos(t),Math.sin(t)]}function f(t,e){let s=t.indexOf(e);s>=0&&t.splice(s,1)}let h={};for(let c in e)for(let t of c)h[t]=e[c];let _=new Image;_.src="./sprites.png";let l=c,u=l.getContext("2d");function v(t,e,s){!function([t,e,s,o],i,n){!function(t,e,s,o,i,n,r,a){u.drawImage(_,t,e,s,o,0|i,0|n,r,a)}(t,e,s,o,i,n,s,o)}(t,e,-s-t[3])}let d=0,m=0;function x(t,e=d,s=m){var o;d=0|e,m=0|s;for(let i=0;i<t.length;i++){let s=t[i];if("\n"===s)d=e,m+=7;else{let t=s.charCodeAt(0)-32,e=t%32*5,i=6*(t/32|0),n=d,r=m;u.drawImage(_,e,i,5,6,n,r,5,6),d+=null!=(o=h[s])?o:5}}}function w(){let{width:t,height:e}=l,s=Math.min(innerWidth/t,innerHeight/e,3);l.style.width=l.width*s+"px",l.style.height=l.height*s+"px",u.imageSmoothingEnabled=!1}let p=[];const g=[0,0];function q([t,e]){return t+Math.random()*e}let y=[];const b=class{constructor(t={}){this.t=new Set,this.x=0,this.y=0,this.w=0,this.o=0,this.i=[],this.frequency=0,this.h=g,this.angle=g,this.duration=g,this._=g,this.l=g,this.u=g,this.v=0,this.done=!1,Object.assign(this,t),y.push(this)}extend(t){return Object.assign(this,t)}remove(){this.done=!0}update(t){let e=t/1e3;for(this.v+=this.frequency;!this.done&&this.v>0;)this.v-=1,this.m();for(let s of this.t)(s.p+=t)>=s.duration?(this.t.delete(s),b.g.push(s)):(s.x+=s.q*e,s.y+=s.M*e,s.M-=s.u*e,s.y<=0&&(s.y=0,s.M*=-s._,s.q*=s.l));this.done&&0===this.t.size&&f(y,this)}m(){let t=b.g.pop()||{},e=q(this.h),s=q(this.angle),[o,i]=a(s);t.x=q([this.x,this.w]),t.y=q([this.y,this.o]),t.q=o*e,t.M=i*e,t.p=0,t.duration=q(this.duration),t._=q(this._),t.l=q(this.l),t.u=q(this.u),t.variant=0|q([0,this.i.length]),this.t.add(t)}k(t){for(let e=0;e<t;e++)this.m();return this}};let M=b;M.g=[];class k{constructor(){this.x=0,this.y=0,this.q=0,this.M=0,this.u=0,this._=0,this.l=0,this.A=0,this.R=[0,0,0,0],this.tags=0,this.j=0,this.C=0,this.D=0,this.S=0,this.B=0,this.F=!1,this.O=!1,this.groupId=0,this.P=[],this.$=0,this.I=0}is(t){return(this.tags&t)>0}bounds(){return{x:this.x,y:this.y,w:this.R[2],o:this.R[3]}}L(){return n(this.x+this.R[2]/2,this.y+this.R[3]/2)}update(t){this.T(t),this.I-=t,this.I<=0&&(this.I=this.$,this.N()),this.U&&(this.U.x=this.x,this.U.y=this.y)}W(t=new A(this),e=this.P.length){let{constructor:s}=Object.getPrototypeOf(t);return s!==A&&this.H(s)||(this.P.splice(e,0,t),t.V()),t}X(t){f(this.P,t),t.Y()}H(t){return this.P.find((e=>e instanceof t))}T(t){for(let e of this.P)e.T(t)}N(){for(let t of this.P)if(++t.G>=t.J&&(t.G=0,t.N()))break}K(t){for(let e of this.P)e.K(t)}Z(t){for(let e of this.P)e.Z(t)}tt(){for(let t of this.P)t.tt();this.O&&game.et(this)}st(t){for(let e of this.P)e.st(t);this.F&&game.et(this)}}class A{constructor(t){this.object=t,this.J=1,this.G=0}V(){}Y(){}N(){}tt(){}K(t){}Z(t){}T(t){}st(t){}}let R={ot:[],items:[],selectedIndex:0},j=n(0,150);var C;!function(){var t=44100;function e(t){return Math.sin(6.283184*t)}var s=[e,function(t){return e(t)<0?-1:1},function(t){return t%1-.5},function(t){var e=t%1*4;return e<2?e-1:3-e}];function o(t){return.00390625*Math.pow(1.059463094,t-128)}function i(t){return{left:new Float32Array(t),right:new Float32Array(t)}}function n(t,e,s,o){for(var i=s.it*o>>1,n=s.nt/255,r=0;r<e-i;){var a=r,f=r+i;t.left[f]+=t.right[a]*n,t.right[f]+=t.left[a]*n,r++}}function r(e,s){var o=e.createBuffer(2,s.left.length,t);return o.getChannelData(0).set(s.left),o.getChannelData(1).set(s.right),o}var a=function(t,e,o){this.rt=t,this.at=e,this.ft=o||5605,this.ht=s[e.ct],this._t=s[e.lt],this.ut=s[e.vt],this.attack=e.dt,this.xt=e.wt,this.release=e.gt,this.qt=Math.pow(2,e.yt-8)/this.ft,this.bt=Math.pow(2,e.Mt-8)/this.ft};a.prototype.kt=function(s,i,n){for(var r=0,a=0,f=o(s+12*(this.at.At-8)+this.at.Rt)*(1+8e-4*this.at.jt),h=o(s+12*(this.at.Ct-8)+this.at.Dt)*(1+8e-4*this.at.St),c=this.at.Bt/255,_=0,l=0,u=i.left.length,v=this.attack+this.xt+this.release-1;v>=0;--v){var d=v+n,m=this.ht(d*this.bt)*this.at.Ft/512+.5,x=1;v<this.attack?x=v/this.attack:v>=this.attack+this.xt&&(x-=(v-this.attack-this.xt)/this.release);var w=f;this.at.Ot&&(w+=m),this.at.Pt&&(w*=x*x),r+=w;var p=this._t(r)*this.at.$t;w=h,this.at.It&&(w*=x*x),a+=w,p+=this.ut(a)*this.at.Lt,this.at.Tt&&(p+=(2*Math.random()-1)*this.at.Tt*x),p*=x/255;var g=this.at.Et;this.at.Nt&&(g*=m);var q=c*(p-l)-(_+=(g=1.5*Math.sin(3.141592*g/t))*l);switch(l+=g*q,this.at.Ut){case 1:p=q;break;case 2:p=_;break;case 3:p=l;break;case 4:p=_+q}w=e(d*this.qt)*this.at.Wt/512+.5,p*=.00476*this.at.zt,d<u&&(i.left[d]+=p*(1-w),i.right[d]+=p*w)}},a.prototype.Ht=function(t,e){var s=this.attack+this.xt+this.release-1+32*this.ft,o=i(s);this.kt(t,o,0),n(o,s,this.at,this.ft),e(r(this.rt,o))};var f=function(e,s){this.rt=e,this.Vt=s,this.Xt=t*s.Yt};f.prototype.Gt=function(t,e,s){var o=this,r=i(this.Xt),f=o.Xt,h=o.Vt.ft,c=o.Vt.Jt,_=new a(o.rt,t,h),l=0,u=0,v=0,d=function(){for(var e=Date.now();;)if(32!==v){if(u===c-1)return m();var s=t.Kt[u];if(s){var o=t.c[s-1].n[v];o&&_.kt(o,r,l)}if(l+=h,v+=1,Date.now()-e>33)return void setTimeout(d,0)}else v=0,u+=1},m=function(){n(r,f,t,h);for(var o=0;o<f;o++)e.left[o]+=r.left[o];for(o=0;o<f;o++)e.right[o]+=r.right[o];s()};d()},f.prototype.Ht=function(t){var e=this,s=i(this.Xt),o=0,n=function(){o<e.Vt.Qt.length?(o+=1,e.Gt(e.Vt.Qt[o-1],s,n)):t(r(e.rt,s))};n()},C=function(t,e,s){new f(t,e).Ht(s)}}();var D,S=new AudioContext;let B=function(){let e=new k;return e.x=5,e.tags=36,e.R=t,e.j=2,e.$=1e3,e.C=e.D=5,e.U=(s=e.bounds(),i=[[void 0,void 0,void 0],[void 0,void 0,void 0],[void 0,void 0,void 0]],new M({...s,duration:[500,1e3],h:[1,10],angle:[o-.2,.4],_:[0,0],frequency:2,u:[-2,0],i:i})).extend({frequency:0}),e.Z=()=>window.location=window.location,e;var s,i}();B.R=t;let F=new class{constructor(t){this.Zt={width:400,height:200,floor:0,te:200},this.ee=[],this.se=void 0,this.ot=[],this.state=0,this.S=0,this.oe=0,this.level=0,this.ie=[],this.ne={re:0,ae:15,fe:180,he:1,ce:.1,_e:3,le:3,ue:1e3,ve:0},this.de={me:1e4,G:1e4},this.se=t,this.xe(t),window.game=this}xe(t,e=t.x,s=t.y){t.x=e,t.y=s,this.ee.push(t)}et(t){var e;null==(e=t.U)||e.remove();for(let s of Array.from(t.P))t.X(s);f(this.ee,t)}we(){return this.oe/10}pe(t){this.S+=t+t*this.we()}ge(t){var e;this.ot.push(t),null==(e=t.qe)||e.call(t)}ye(t){if(t.be)for(let e of this.ot)if(t.be&e.tags)return!1;if(t.Me){for(let e of this.ot)if(t.Me&e.tags)return!0;return!1}return!0}update(t){this.ke(t),this.Ae(t),this.Re(t),this.je(t),this.Ce(t)}ke(t){game.de.G+=t,game.se.U.frequency=game.de.G>=game.de.me?.1:0}Ae(t){this.ne.le<this.ne._e&&(this.ne.ve+=t,this.ne.ve>this.ne.ue&&(this.ne.le+=1,this.ne.ve=0))}Ce(t){var e;for(let s of this.ot)null==(e=s.T)||e.call(s,t)}Re(t){for(let e of this.ee)e.update(t)}je(t){let e=t/1e3;for(let i of this.ee)i.x+=i.q*e,i.y+=i.M*e;for(let i of this.ee){let t=this.Zt.floor,s=this.Zt.te-i.R[3];(i.y<t||i.y>s)&&(i.y=r(i.y,t,s),Math.abs(i.M)>=10&&i.tt(),i.M*=-i._),i.y!==t&&i.y!==s||(i.q*=1-i.l),i.u&&i.y>0&&(i.M-=i.u*e)}for(let i of this.ee)for(let t of this.ee)i.j&t.tags&&(s=i.bounds(),o=t.bounds(),s.x<o.x+o.w&&s.y<o.y+o.o&&s.x+s.w>o.x&&s.y+s.o>o.y&&i.st(t));var s,o}De(){var t;for(let e of game.ot)null==(t=e.De)||t.call(e)}Se(){var t;for(let e of game.ot)null==(t=e.Se)||t.call(e)}Be(){var t;for(let e of game.ot)null==(t=e.Be)||t.call(e)}Fe(t,e=!1){var s;for(let o of game.ot)e&&0==o.Oe||null==(s=o.Fe)||s.call(o,t)}Pe(){let{ne:t,se:e}=this,s=e.L(),[o,i]=a(t.re);return{x:s.x+o*t.ae,y:s.y+i*t.ae}}}(B);C(S,{ft:12027,Jt:17,Qt:[{At:7,Rt:0,jt:0,Pt:0,$t:63,lt:2,Ct:7,Dt:0,St:0,It:0,Lt:56,vt:3,Tt:0,dt:100,wt:150,gt:13636,zt:191,Ut:2,Et:5839,Bt:254,it:2,nt:121,yt:6,Wt:147,Ot:0,Nt:1,Mt:6,Ft:195,ct:0,Kt:[1,2,1,2,1,2,3,4,1,2,3,4,1,2,1,2],c:[{n:[139,144,147,151,152,151,147,144,139,144,147,151,152,151,147,144,139,143,147,151,152,151,147,143,139,143,147,151,152,151,147,143]},{n:[139,142,147,151,152,151,147,142,139,142,147,151,152,151,147,142,139,143,146,149,151,149,146,143,139,143,146,149,151,149,146,143]},{n:[139,144,147,144,151,144,147,144,139,144,147,144,151,144,147,144,139,143,147,143,151,143,147,143,139,143,147,143,151,143,147,143]},{n:[139,142,147,142,151,142,147,142,139,142,147,142,151,142,147,142,139,143,146,143,149,143,146,143,139,143,146,143,149,143,146,143]}]},{At:9,Rt:0,jt:0,Pt:0,$t:255,lt:0,Ct:9,Dt:0,St:12,It:0,Lt:255,vt:0,Tt:0,dt:5970,wt:4611,gt:13163,zt:91,Ut:0,Et:0,Bt:240,it:2,nt:157,yt:3,Wt:47,Ot:0,Nt:0,Mt:0,Ft:0,ct:0,Kt:[1,2,1,2,1,2,3,4,1,2,3,4,1,5],c:[{n:[132,0,0,0,0,0,0,0,139,0,144,0,146,144,0,0,142,0,0,0,0,0,139,0,142,0,146,0,149,147,0,0]},{n:[140,0,0,0,0,0,0,0,135,0,0,0,0,0,132,134,135,0,0,0,0,0,132,135,137,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,146,0,151,0]},{n:[154,0,153,0,151,0,0,0,0,0,0,0,0,0,156,0,158,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[140,0,0,0,0,0,0,0,139,0,0,0,0,0,0,0,146,0,0,0,0,0,0,0,139,0,0,0,0,0,0,0]}]},{At:8,Rt:0,jt:0,Pt:0,$t:255,lt:0,Ct:7,Dt:0,St:12,It:0,Lt:255,vt:0,Tt:0,dt:5268,wt:2418,gt:9671,zt:70,Ut:0,Et:0,Bt:240,it:2,nt:157,yt:3,Wt:47,Ot:0,Nt:0,Mt:0,Ft:0,ct:0,Kt:[0,0,1,2,1,3,4,0,1,3,4,0,5,6,5,6],c:[{n:[0,0,139,139,0,0,135,0,139,0,144,0,147,146,0,0,143,0,0,0,0,0,0,0,151,0,0,0,0,0,0,0]},{n:[147,0,0,0,0,0,0,0,0,0,0,0,142,0,0,0,146,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{n:[147,0,0,0,0,0,0,0,0,0,0,0,142,0,0,0,146,0,0,0,151,0,0,0,155,0,0,0,156,0,0,0]},{n:[158,0,0,0,0,0,151,0,158,0,156,158,159,0,163,159,159,0,0,0,0,0,0,161,158,0,0,0,0,0,0,0]},{n:[0,0,0,139,0,0,144,0,147,0,146,0,144,0,0,0,142,0,0,0,0,0,139,0,0,0,0,0,147,0,0,0]},{n:[135,0,0,0,0,0,0,0,135,0,0,0,152,0,0,154,151,0,0,0,0,0,0,0,139,0,0,0,0,0,0,0]}]},{At:7,Rt:0,jt:0,Pt:1,$t:255,lt:0,Ct:7,Dt:0,St:0,It:1,Lt:255,vt:0,Tt:0,dt:100,wt:0,gt:3636,zt:254,Ut:2,Et:500,Bt:254,it:0,nt:27,yt:0,Wt:0,Ot:0,Nt:0,Mt:0,Ft:0,ct:0,Kt:[0,0,0,0,1,1,0,0,1,1],c:[{n:[135,0,0,0,135,0,0,0,135,0,0,0,135,0,140,139,135,0,0,0,135,0,0,0,135,0,0,0,135,0,140,139]}]},{At:8,Rt:0,jt:0,Pt:0,$t:0,lt:0,Ct:8,Dt:0,St:0,It:0,Lt:0,vt:0,Tt:60,dt:50,wt:419,gt:4607,zt:130,Ut:1,Et:10332,Bt:120,it:1,nt:99,yt:5,Wt:108,Ot:0,Nt:0,Mt:5,Ft:187,ct:0,Kt:[0,0,0,0,1,1,1,1,1,1,1,1],c:[{n:[0,0,0,0,0,0,135,0,0,0,0,0,0,0,135,0,0,0,0,0,0,0,135,0,0,0,0,0,0,0,135,0]}]},{At:7,Rt:0,jt:0,Pt:0,$t:65,lt:2,Ct:7,Dt:0,St:0,It:0,Lt:73,vt:3,Tt:0,dt:100,wt:150,gt:13636,zt:191,Ut:2,Et:5839,Bt:254,it:2,nt:121,yt:6,Wt:147,Ot:0,Nt:1,Mt:6,Ft:195,ct:0,Kt:[0,0,0,0,0,0,1,2,0,0,1,2],c:[{n:[0,0,0,0,0,0,152,0,151,0,0,0,0,0,0,0,0,0,0,0,0,0,152,0,151,0,0,0,0,0,0,0]},{n:[0,0,0,0,0,0,152,0,151,0,0,0,0,0,0,0,0,0,0,0,0,0,151,0,149,0,0,0,0,0,0,0]}]}],Yt:151},(function(t){D=t}));var O=1,P=[1,2,3,2,1,4,5,4,1,2,3,2,1,4,5,4,1,2,3,2,1,4,5,4,1,2,3,2,1,4,5,4,1,6,7,8,9,10,11,12,13,13,13,13,13,13,13,13],$=[t,t,[11,0,10,16],[22,0,10,16],[33,0,10,16],[44,0,11,16],[0,17,13,18],[15,17,16,23],[31,17,19,30],[51,17,21,32],[73,14,26,39],[0,41,29,44],[34,51,36,53],[100,8,41,62]];setInterval((function(){F.se.R=$[P[O]],O=O%(P.length-1)+1}),100),onpointerup=()=>{var t;0===F.state&&((t=S.createBufferSource()).buffer=D,t.loop=!0,t.connect(S.destination),t.start(),F.state=1),console.log(F.se.R),F.se.R=$[P[O]],O=O%(P.length-1)+1},onpointermove=({clientX:t,clientY:e})=>{let s=B.L(),o=function(t,e){let s=l.getBoundingClientRect(),o=(t-s.x)*(l.width/s.width)|0,i=(e-s.y)*(l.height/s.height)|0;return{x:o,y:j.y-i}}(t,e);F.ne.re=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}(s,o)};let I=0;F.ie=["Norman wasn't a particularly popular necromancer...","         The other villagers hunted him.","     Sometimes they even finished the job (@)","  But like any self-respecting necromancer...","        Norman just brought himself back."],function(t,e,s){l.width=t,l.height=e,(onresize=w)();let o=0;!function t(e=0){var s;requestAnimationFrame(t),function(t){(I+=t)>4e3&&(F.ie.shift(),I=0,0===F.state&&0===F.ie.length&&F.ie.push("                (Click to begin)"))}(s=e-o),u.clearRect(0,0,l.width,l.height),u.save(),u.translate(j.x,j.y),function(){for(let t of game.ee){v(t.R,t.x,t.y+t.A);let{x:e}=t;for(let s of t.P)s.R&&(v(s.R,e,-12),e+=s.R[2]+1)}}(),u.restore(),2===game.state&&function(){x("Rituals\n\n",160,20);let t=R.items[R.selectedIndex];for(let e of R.items)x(`${e===t?">":" "}${e.name} $${e.$e}\n`);x("\n"+(null==t?void 0:t.description)+"\n")}(),F.state,0!==F.state&&F.update(s),function(t){p=p.filter((e=>{e.p+=t;let s=r(e.p/e.duration,0,1),o=e.Ie(s),i=e.Le+(e.Te-e.Le)*o;return e.Ee(i,o),s<1}))}(s),function(t){for(let e of y)e.update(t)}(s),F.level,o=e}(),onfocus=()=>o=performance.now()}(F.Zt.width,F.Zt.height),new M({x:0,y:0,w:game.Zt.width,o:game.Zt.height,angle:[0,i],duration:[5e3,1e4],h:[1,3],_:[0,0],frequency:.1,i:[[void 0,void 0],[void 0,void 0,void 0,void 0]]}).k(200);</script>